<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration</title>
     <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
 <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"/>
 <link rel="stylesheet" href="Registration.css" />
 <script type="text/babel">
    function Register(){
         const [username, setUsername] = React.useState("");
      const [password, setPassword] = React.useState("");
     const [message,setMessage]=React.useState("");
     const[email,setEmail]=React.useState("");
     const[mobile,setMobile]=React.useState("");

     const handleSubmit = async(e) => {
    e.preventDefault(); // Prevent page reload
    
    if (!username || !email || !mobile || !password) {
            setMessage("All fields are required!");
            return;
    }

    const userData = { username:username, password:password,email:email,mobile:Number(mobile) };
try{
   const response=await fetch("http://localhost:8080/api/user/register", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
        },
        body: JSON.stringify({username,password,email,mobile}),
    })
   
        const text =await response.text();
        setMessage(text);

        if(response.ok){
            setTimeout(()=>(window.location.href="Login.html"),2000);
        }
    }catch(error){
        console.error("Error:",error);
        setMessage("Error connectiong to server");
    }

   
};

        return(
            <div className="container d-flex justify-content-center align-items-center vh-100">
            <div className="card shadow p-4">
            <form onSubmit={handleSubmit}>
                <div className="mb-3">
                <h1 className="text-center mb-3">Register Form</h1>
                <label className="form-label">User Name</label>
                <input type="text"className="form-control" placeholder="Enter Name"value={username} onChange={(e)=>setUsername(e.target.value)}required />
                <label className="form-label">Email</label>
                <input type="email"className="form-control" placeholder=" Enter Email"value={email} onChange={(e)=>setEmail(e.target.value)}required />
                <label className="form-label">Mobile</label>
                <input type="text" className="form-control"placeholder="Mobile"value={mobile} onChange={(e)=>setMobile(e.target.value)}required />
                <label className="form-label">Password</label>
                <input type="text" className="form-control"placeholder="Create password"value={password} onChange={(e)=>setPassword(e.target.value)}required /></div>
                
                <button className="btn btn-primary" type="submit">Register</button>
                {message && <div className="alert alert-info mt-3">{message}</div>}

                </form>
            </div>
            </div>
        );
    }
    
    const root= ReactDOM.createRoot(document.getElementById("root"));
root.render( <Register/>);
</script>

 
</head>
<body>
    <noscript>Enable js</noscript>
    <div id="root"></div>
    
</body>
</html>