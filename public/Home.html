
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
 <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"/>
 <link rel="stylesheet"href="Home.css"/>
 

 <script type="text/babel">
function Login(){
     const [username, setUsername] = React.useState("");
      const [password, setPassword] = React.useState("");
     const [message,setMessage]=React.useState("");
     const[email,setEmail]=React.useState("");
     const[isLogin,setIsLogin]=React.useState(true);

      const handleSubmit = async(e) => {
        e.preventDefault(); // prevent page reload
        if (username.trim() === "" || password.trim() === "") {
          setMessage(" Username and Password are required!");
          return;
        }
       
        fetch("http://localhost:8080/api/user/login", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
             body: JSON.stringify({
                username,
                password
            })
        })
        
        .then(async response =>  {const text = await response.text();
        setMessage(text);
    if(response.ok){
        setTimeout(() => window.location.href="Home.html",1500);
    }
            })
           
            
        
        
        
    
        .catch(err => setMessage("Error connecting to server"));
    };

    return(
        
            <div className="container d-flex justify-content-center align-items-center vh-100">
            <div className="card shadow p-4">
            <h2 className="text-center mb-3 "> <i className="bi bi-person-circle"></i>User Login</h2>
            <form onSubmit={handleSubmit}>
                <div className="mb-3">
                <label className="form-label">User Name</label>
                <input type="text"className="form-control" placeholder="Enter username"value={username} onChange={(e)=>setUsername(e.target.value)}required />
                </div>
                <div className="mb-3">
                <label className="form-label">Password</label>
                <input type="password"className="form-control" placeholder="Password" value={password} onChange={(e)=>setPassword(e.target.value)}required />
                </div>
                {message && <div className="alert alert-info">{message}</div>}
                <a href="Registration.html">New user</a><br/>
                <button className="btn btn-primary" type="submit">Login</button>
        
            </form>
            
        
        </div>
        </div>
        
    );
      }
    
const root= ReactDOM.createRoot(document.getElementById("root"));
root.render( <Login/>);

</script>
</head>

<body>
    <noscript>Enabel JavaScript</noscript>
    <div id="root"></div>
   
</body>
</html>